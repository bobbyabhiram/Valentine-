<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lipi, Will You Be My Valentine?</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Great+Vibes&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}

:root{
‚Äìrose:#e8436a;
‚Äìrose-light:#f7a8b8;
‚Äìrose-deep:#b91c4a;
‚Äìblush:#fff0f3;
‚Äìgold:#d4a853;
‚Äìgold-light:#f0d89d;
‚Äìcream:#fdf6ee;
‚Äìdark:#1a0a10;
‚Äìwine:#3d0f1e;
}

html,body{
height:100%;width:100%;overflow:hidden;
font-family:‚ÄòCormorant Garamond‚Äô,serif;
background:var(‚Äìdark);
color:#fff;
}

/* ============ CANVAS FOR PARTICLES ============ */
#particles{position:fixed;inset:0;z-index:0;pointer-events:none}

/* ============ PAGE 1 ‚Äî THE ASK ============ */
#first-page{
height:100%;width:100%;
display:flex;flex-direction:column;justify-content:center;align-items:center;
text-align:center;position:relative;z-index:1;
background:url(‚Äòbackground.JPG‚Äô) no-repeat center center/cover fixed;
}

#first-page::before{
content:‚Äù‚Äù;position:absolute;inset:0;
background:linear-gradient(180deg,rgba(26,10,16,.55) 0%,rgba(61,15,30,.7) 50%,rgba(26,10,16,.85) 100%);
z-index:0;
}

.ask-content{
position:relative;z-index:2;
animation:fadeSlideUp 1.2s ease-out both;
width:90%;max-width:700px;
}

@keyframes fadeSlideUp{
from{opacity:0;transform:translateY(40px)}
to{opacity:1;transform:translateY(0)}
}

.ask-content .pretext{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-size:clamp(12px,2.5vw,20px);
letter-spacing:6px;
text-transform:uppercase;
color:var(‚Äìgold-light);
margin-bottom:12px;
opacity:.85;
animation:fadeSlideUp 1s .3s ease-out both;
}

.ask-content h1{
font-family:‚ÄòPlayfair Display‚Äô,serif;
font-size:clamp(28px,7vw,72px);
font-weight:700;
line-height:1.1;
color:#fff;
text-shadow:0 4px 30px rgba(232,67,106,.4);
margin-bottom:8px;
animation:fadeSlideUp 1s .5s ease-out both;
}

.ask-content h1 .name{
font-family:‚ÄòGreat Vibes‚Äô,cursive;
display:block;
font-size:clamp(44px,11vw,110px);
color:var(‚Äìrose-light);
text-shadow:0 0 60px rgba(232,67,106,.5),0 4px 20px rgba(0,0,0,.4);
line-height:1.3;
}

.ask-content .subtitle{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-style:italic;
font-size:clamp(14px,3vw,22px);
color:var(‚Äìrose-light);
opacity:.8;
margin-bottom:36px;
animation:fadeSlideUp 1s .7s ease-out both;
}

/* ‚Äì‚Äì BUTTONS ‚Äî NO OVERLAP ‚Äì‚Äì */
.btn-container{
display:flex;
justify-content:center;
align-items:center;
gap:24px;
min-height:70px;
animation:fadeSlideUp 1s .9s ease-out both;
}

.btn{
font-family:‚ÄòPlayfair Display‚Äô,serif;
font-size:clamp(15px,3.2vw,20px);
font-weight:700;
padding:16px 44px;
border:none;border-radius:60px;
cursor:pointer;
transition:all .35s cubic-bezier(.4,0,.2,1);
letter-spacing:1px;
position:relative;overflow:hidden;
white-space:nowrap;
}

.btn::after{
content:‚Äù‚Äù;position:absolute;inset:0;
background:linear-gradient(120deg,transparent 30%,rgba(255,255,255,.15) 50%,transparent 70%);
transform:translateX(-100%);
transition:transform .6s;
}
.btn:hover::after{transform:translateX(100%)}

#yes{
background:linear-gradient(135deg,var(‚Äìrose),var(‚Äìrose-deep));
color:#fff;
box-shadow:0 8px 32px rgba(232,67,106,.45),inset 0 1px 0 rgba(255,255,255,.2);
}
#yes:hover{
filter:brightness(1.1);
box-shadow:0 14px 44px rgba(232,67,106,.6);
}

/* No starts inline, escapes to fixed on hover */
#no{
background:rgba(255,255,255,.08);
color:rgba(255,255,255,.6);
border:1px solid rgba(255,255,255,.15);
backdrop-filter:blur(6px);
z-index:3;
transition:background .2s;
/* NO transition on position/transform ‚Äî it must JUMP instantly */
}
#no.escaped{position:fixed}
#no:hover{background:rgba(255,255,255,.12)}

/* Yes grows as No is pressed */
#yes{transition:all .4s cubic-bezier(.4,0,.2,1)}

/* Speech bubble that pleads */
.plead-bubble{
position:fixed;z-index:50;
background:linear-gradient(145deg,rgba(255,255,255,.15),rgba(255,255,255,.06));
backdrop-filter:blur(16px);
border:1px solid rgba(247,168,184,.3);
border-radius:20px;
padding:12px 22px;
max-width:280px;
text-align:center;
pointer-events:none;
animation:bubbleIn .4s ease-out both;
box-shadow:0 8px 30px rgba(0,0,0,.3);
}
.plead-bubble::after{
content:‚Äù‚Äù;position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);
width:0;height:0;
border-left:8px solid transparent;
border-right:8px solid transparent;
border-top:8px solid rgba(255,255,255,.1);
}
.plead-bubble .plead-emoji{font-size:24px;display:block;margin-bottom:4px}
.plead-bubble .plead-text{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-style:italic;
font-size:clamp(13px,3vw,16px);
color:var(‚Äìrose-light);
}

@keyframes bubbleIn{
from{opacity:0;transform:translateY(10px) scale(.9)}
to{opacity:1;transform:translateY(0) scale(1)}
}
@keyframes bubbleOut{
to{opacity:0;transform:translateY(-10px) scale(.9)}
}

/* Page shake when No is pressed */
@keyframes pageShake{
0%,100%{transform:translateX(0)}
20%{transform:translateX(-4px) rotate(-.3deg)}
40%{transform:translateX(4px) rotate(.3deg)}
60%{transform:translateX(-3px) rotate(-.2deg)}
80%{transform:translateX(2px) rotate(.1deg)}
}

/* Floating decorative hearts */
.float-heart{
position:absolute;z-index:1;
font-size:clamp(18px,4vw,30px);
opacity:.15;
animation:gentleFloat 6s ease-in-out infinite;
}
@keyframes gentleFloat{
0%,100%{transform:translateY(0) rotate(0deg)}
50%{transform:translateY(-20px) rotate(8deg)}
}

/* ============ PAGE 2 ‚Äî CELEBRATION ============ */
#second-page{
display:none;height:100%;width:100%;position:relative;overflow:hidden;
background:var(‚Äìdark);
}

.photo-mosaic{
display:grid;
grid-template-columns:repeat(3,1fr);
grid-template-rows:repeat(2,1fr);
height:100%;width:100%;gap:0;
}

.photo-cell{position:relative;overflow:hidden}
.photo-cell .photo-bg{
position:absolute;
inset:0;
background-size:cover;background-position:center;
transition:transform 8s ease;
filter:brightness(.75) saturate(1.15);
}
.photo-cell:hover .photo-bg{transform:scale(1.08)}

#second-page::after{
content:‚Äù‚Äù;position:absolute;inset:0;
background:radial-gradient(ellipse at center,rgba(26,10,16,.15) 0%,rgba(26,10,16,.7) 100%);
pointer-events:none;z-index:1;
}

/* ‚Äì‚Äì CENTER CARD ‚Äì‚Äì */
.love-card{
position:absolute;top:50%;left:50%;
transform:translate(-50%,-50%);
z-index:3;width:90%;max-width:440px;
max-height:92vh;
overflow-y:auto;
text-align:center;
background:linear-gradient(145deg,rgba(255,255,255,.10),rgba(255,255,255,.03));
backdrop-filter:blur(16px) saturate(1.3);
-webkit-backdrop-filter:blur(16px) saturate(1.3);
border:1px solid rgba(255,255,255,.12);
border-radius:32px;
padding:30px 20px 26px;
box-shadow:0 30px 80px rgba(0,0,0,.5),inset 0 1px 0 rgba(255,255,255,.1);
animation:cardAppear 1s .3s ease-out both;
scrollbar-width:none;
}
.love-card::-webkit-scrollbar{display:none}

@keyframes cardAppear{
from{opacity:0;transform:translate(-50%,-50%) scale(.9) translateY(30px)}
to{opacity:1;transform:translate(-50%,-50%) scale(1) translateY(0)}
}

.love-card .heart-icon{
font-size:40px;display:block;margin-bottom:2px;
animation:heartbeat 1.2s ease-in-out infinite;
}

@keyframes heartbeat{
0%,100%{transform:scale(1)}
15%{transform:scale(1.15)}
30%{transform:scale(1)}
45%{transform:scale(1.1)}
}

.love-card h1{
font-family:‚ÄòGreat Vibes‚Äô,cursive;
font-size:clamp(30px,8vw,54px);
color:var(‚Äìrose-light);
text-shadow:0 0 40px rgba(232,67,106,.4);
margin-bottom:2px;line-height:1.2;
}

.gold-line{
width:60px;height:1px;
background:linear-gradient(90deg,transparent,var(‚Äìgold),transparent);
margin:10px auto;
}

/* ===== CREATIVE COUNTER ===== */
.counter-label{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-style:italic;
font-size:clamp(11px,2.5vw,15px);
color:var(‚Äìgold-light);
letter-spacing:2px;
opacity:.8;
margin-bottom:10px;
}

.counter-grid{
display:flex;
justify-content:center;
align-items:flex-start;
gap:clamp(4px,1.5vw,10px);
margin-bottom:4px;
}

.counter-unit{display:flex;flex-direction:column;align-items:center}

.counter-num{
font-family:‚ÄòPlayfair Display‚Äô,serif;
font-weight:700;
font-size:clamp(20px,5.5vw,36px);
color:#fff;
width:clamp(38px,11vw,62px);
height:clamp(38px,11vw,62px);
display:flex;justify-content:center;align-items:center;
background:linear-gradient(145deg,rgba(232,67,106,.25),rgba(185,28,74,.15));
border:1px solid rgba(247,168,184,.25);
border-radius:14px;
box-shadow:0 4px 20px rgba(232,67,106,.15),inset 0 1px 0 rgba(255,255,255,.1);
position:relative;overflow:hidden;
transition:transform .3s ease;
}

.counter-num::after{
content:‚Äù‚Äù;position:absolute;top:0;left:-100%;
width:100%;height:100%;
background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent);
animation:shimmer 3s ease-in-out infinite;
}
@keyframes shimmer{0%,100%{left:-100%}50%{left:100%}}

.counter-unit-label{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-size:clamp(8px,1.8vw,11px);
text-transform:uppercase;
letter-spacing:2px;
color:var(‚Äìrose-light);
opacity:.7;
margin-top:5px;
}

.counter-colon{
font-family:‚ÄòPlayfair Display‚Äô,serif;
font-size:clamp(18px,4.5vw,30px);
color:var(‚Äìrose-light);
opacity:.5;
align-self:center;
margin-bottom:16px;
animation:colonPulse 1s ease-in-out infinite;
}
@keyframes colonPulse{0%,100%{opacity:.5}50%{opacity:.15}}

.heartbeats{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-style:italic;
font-size:clamp(10px,2.2vw,13px);
color:var(‚Äìgold-light);
opacity:.6;
margin:6px 0 2px;
}
.heartbeats .hb-num{color:var(‚Äìrose-light);font-weight:600;font-style:normal}

.reason{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-style:italic;
font-size:clamp(12px,2.8vw,16px);
color:rgba(255,255,255,.75);
min-height:22px;
transition:opacity .4s;
margin:10px 0 16px;
}

.letter-btn{
font-family:‚ÄòPlayfair Display‚Äô,serif;
font-size:clamp(12px,2.5vw,15px);
font-weight:600;
padding:12px 30px;
border:none;border-radius:50px;
background:linear-gradient(135deg,var(‚Äìrose),var(‚Äìrose-deep));
color:#fff;cursor:pointer;
letter-spacing:.5px;
box-shadow:0 6px 24px rgba(232,67,106,.4);
transition:all .3s ease;
}
.letter-btn:hover{
transform:translateY(-2px);
box-shadow:0 10px 36px rgba(232,67,106,.55);
}

/* ============ LOVE LETTER MODAL ============ */
#letter-modal{
display:none;position:fixed;inset:0;z-index:50;
justify-content:center;align-items:center;padding:24px;
background:rgba(10,4,6,.9);
backdrop-filter:blur(12px);
}

.letter-paper{
background:linear-gradient(168deg,#fdf8f0,#f9ede0);
border-radius:24px;
max-width:440px;width:100%;
padding:44px 32px 32px;
text-align:center;
position:relative;
box-shadow:0 40px 100px rgba(0,0,0,.5),inset 0 0 80px rgba(212,168,83,.08);
animation:letterIn .6s ease-out both;
max-height:90vh;overflow-y:auto;
}

@keyframes letterIn{
from{opacity:0;transform:scale(.92) translateY(20px)}
to{opacity:1;transform:scale(1) translateY(0)}
}

.letter-paper::before{
content:‚Äù‚Äù;position:absolute;top:16px;left:50%;transform:translateX(-50%);
width:60px;height:3px;
background:linear-gradient(90deg,transparent,var(‚Äìgold),transparent);
border-radius:2px;
}

.letter-paper h2{
font-family:‚ÄòGreat Vibes‚Äô,cursive;
font-size:clamp(28px,7vw,42px);
color:var(‚Äìrose-deep);
margin-bottom:20px;
}

.letter-paper p{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-size:clamp(15px,3.5vw,19px);
line-height:1.8;
color:#4a2832;
margin-bottom:24px;
}

.letter-paper .close-btn{
font-family:‚ÄòPlayfair Display‚Äô,serif;
font-size:14px;font-weight:600;
padding:12px 32px;border:none;border-radius:50px;
background:linear-gradient(135deg,var(‚Äìrose),var(‚Äìrose-deep));
color:#fff;cursor:pointer;
box-shadow:0 4px 16px rgba(185,28,74,.3);
transition:all .3s ease;
}
.letter-paper .close-btn:hover{
transform:translateY(-2px);
box-shadow:0 8px 28px rgba(185,28,74,.45);
}

.wax-seal{
position:absolute;top:-28px;left:50%;transform:translateX(-50%);
width:56px;height:56px;
background:radial-gradient(circle at 40% 35%,#d64040,#8b1a1a);
border-radius:50%;
display:flex;justify-content:center;align-items:center;
font-size:24px;
box-shadow:0 4px 16px rgba(0,0,0,.3),inset 0 -2px 6px rgba(0,0,0,.2);
}

/* ============ MILESTONE TOAST ============ */
.milestone-toast{
position:fixed;top:20px;left:50%;transform:translateX(-50%);
z-index:40;
background:linear-gradient(135deg,rgba(212,168,83,.2),rgba(232,67,106,.15));
backdrop-filter:blur(20px);
border:1px solid rgba(212,168,83,.3);
border-radius:20px;
padding:14px 28px;
text-align:center;
animation:toastIn .6s ease-out both;
box-shadow:0 10px 40px rgba(0,0,0,.4);
}
.milestone-toast .mt-emoji{font-size:28px;display:block;margin-bottom:4px}
.milestone-toast .mt-text{
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-size:clamp(13px,3vw,16px);
color:var(‚Äìgold-light);font-style:italic;
}

@keyframes toastIn{
from{opacity:0;transform:translateX(-50%) translateY(-20px)}
to{opacity:1;transform:translateX(-50%) translateY(0)}
}
@keyframes toastOut{to{opacity:0;transform:translateX(-50%) translateY(-30px)}}

/* ============ FLOATING ELEMENTS ============ */
.petal{
position:fixed;z-index:4;pointer-events:none;
width:12px;height:12px;
background:var(‚Äìrose-light);
border-radius:50% 0 50% 50%;
opacity:.6;
animation:petalFall linear forwards;
}
@keyframes petalFall{
0%{transform:translateY(-20px) rotate(0deg);opacity:.7}
100%{transform:translateY(110vh) rotate(720deg);opacity:0}
}

.burst-heart{
position:fixed;z-index:10;pointer-events:none;
font-size:22px;
animation:burstUp 1.8s ease-out forwards;
}
@keyframes burstUp{
0%{transform:translateY(0) scale(1);opacity:1}
100%{transform:translateY(-200px) scale(.6);opacity:0}
}

.sparkle{
position:fixed;z-index:10;pointer-events:none;
font-size:16px;
animation:sparkPop .8s ease-out forwards;
}
@keyframes sparkPop{
0%{transform:scale(.5);opacity:1}
100%{transform:scale(2);opacity:0}
}

.whisper{
position:fixed;z-index:4;pointer-events:none;
font-family:‚ÄòCormorant Garamond‚Äô,serif;
font-style:italic;
font-size:clamp(13px,2.5vw,16px);
color:var(‚Äìrose-light);opacity:.5;
animation:whisperFloat 7s linear forwards;
text-shadow:0 0 12px rgba(232,67,106,.3);
}
@keyframes whisperFloat{
0%{transform:translateY(0);opacity:.5}
100%{transform:translateY(-100vh);opacity:0}
}

/* ============ RESPONSIVE ============ */
@media(max-width:600px){
.photo-mosaic{grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr)}
.love-card{padding:22px 14px 20px;border-radius:24px}
.letter-paper{padding:36px 20px 24px}
.counter-num{border-radius:10px}
}

::-webkit-scrollbar{display:none}
</style>

</head>

<body>

<canvas id="particles"></canvas>

<audio id="bg-music" loop>
  <source src="song.mp3" type="audio/mpeg">
</audio>

<!-- ======== PAGE 1 ======== -->

<div id="first-page">
  <span class="float-heart" style="top:12%;left:8%;animation-delay:0s">‚ô•</span>
  <span class="float-heart" style="top:20%;right:10%;animation-delay:1.5s;font-size:20px">‚ô•</span>
  <span class="float-heart" style="bottom:18%;left:15%;animation-delay:3s">‚ô•</span>
  <span class="float-heart" style="bottom:25%;right:12%;animation-delay:2s;font-size:16px">‚ô•</span>

  <div class="ask-content">
    <div class="pretext">a question for you</div>
    <h1>
      <span class="name">Lipi</span>
      Will You Be My Valentine?
    </h1>
    <div class="subtitle">‚Äî say yes & let me show you something beautiful ‚Äî</div>
    <div class="btn-container">
      <button class="btn" id="yes" onclick="yesClick()">Yes, Forever ‚ô•</button>
      <button class="btn" id="no" onmouseover="moveNo()" ontouchstart="moveNo(event)" onclick="moveNo(event)">No üòú</button>
    </div>
  </div>
</div>

<!-- ======== PAGE 2 ======== -->

<div id="second-page">
  <div class="photo-mosaic">
    <div class="photo-cell"><div class="photo-bg" style="background-image:url('photo1.JPG')"></div></div>
    <div class="photo-cell"><div class="photo-bg" style="background-image:url('photo2.JPG')"></div></div>
    <div class="photo-cell"><div class="photo-bg" style="background-image:url('photo3.JPG')"></div></div>
    <div class="photo-cell"><div class="photo-bg" style="background-image:url('photo4.JPG')"></div></div>
    <div class="photo-cell"><div class="photo-bg" style="background-image:url('photo5.JPG')"></div></div>
    <div class="photo-cell"><div class="photo-bg" style="background-image:url('photo6.JPG')"></div></div>
  </div>

  <div class="love-card">
    <span class="heart-icon">üíñ</span>
    <h1>I Love You</h1>
    <div class="gold-line"></div>
    <div class="counter-label">Every second since I found you</div>
    <div class="counter-grid">
      <div class="counter-unit">
        <div class="counter-num" id="c-days">0</div>
        <div class="counter-unit-label">Days</div>
      </div>
      <span class="counter-colon">:</span>
      <div class="counter-unit">
        <div class="counter-num" id="c-hours">0</div>
        <div class="counter-unit-label">Hours</div>
      </div>
      <span class="counter-colon">:</span>
      <div class="counter-unit">
        <div class="counter-num" id="c-mins">0</div>
        <div class="counter-unit-label">Mins</div>
      </div>
      <span class="counter-colon">:</span>
      <div class="counter-unit">
        <div class="counter-num" id="c-secs">0</div>
        <div class="counter-unit-label">Secs</div>
      </div>
    </div>
    <div class="heartbeats">‚âà <span class="hb-num" id="hb-count">0</span> heartbeats together</div>
    <div class="gold-line"></div>
    <div class="reason" id="reasons"></div>
    <button class="letter-btn" onclick="showLetter()">Read My Love Letter üíå</button>
  </div>
</div>

<!-- ======== LOVE LETTER ======== -->

<div id="letter-modal">
  <div class="letter-paper">
    <div class="wax-seal">üíñ</div>
    <h2>My Dearest Lipi</h2>
    <p>
      From the moment you walked into my life, everything changed in the most beautiful way.<br><br>
      Your laugh is my favourite sound, your smile my favourite sight, and your happiness my only mission.<br><br>
      You are my heart, my home, and my forever Valentine. Loving you is the easiest thing I've ever done. ‚ù§Ô∏è
    </p>
    <button class="close-btn" onclick="hideLetter()">Close With a Kiss üíã</button>
  </div>
</div>

<script>
/* ========== PARTICLE CANVAS ========== */
(function(){
  const c=document.getElementById('particles'),ctx=c.getContext('2d');
  let w,h,dots=[];
  function resize(){w=c.width=innerWidth;h=c.height=innerHeight}
  resize();addEventListener('resize',resize);
  for(let i=0;i<60;i++){
    dots.push({
      x:Math.random()*w,y:Math.random()*h,
      r:Math.random()*2+.5,
      dx:(Math.random()-.5)*.3,
      dy:-(Math.random()*.3+.1),
      o:Math.random()*.4+.1
    });
  }
  function draw(){
    ctx.clearRect(0,0,w,h);
    dots.forEach(d=>{
      ctx.beginPath();
      ctx.arc(d.x,d.y,d.r,0,Math.PI*2);
      ctx.fillStyle=`rgba(247,168,184,${d.o})`;
      ctx.fill();
      d.x+=d.dx;d.y+=d.dy;
      if(d.y<-10){d.y=h+10;d.x=Math.random()*w}
      if(d.x<-10)d.x=w+10;
      if(d.x>w+10)d.x=-10;
    });
    requestAnimationFrame(draw);
  }
  draw();
})();

/* ========== PAGE TRANSITIONS ========== */
function yesClick(){
  document.getElementById('first-page').style.display='none';
  document.getElementById('second-page').style.display='block';
  try{document.getElementById('bg-music').play()}catch(e){}
  burstHearts(50);
  startPetals();
  showMilestoneToast();
}

/* ---- NO BUTTON: runs away, pleads, Yes grows ‚Äî NEVER disappears ---- */
let noCount=0;
let noEscaped=false;
let currentBubble=null;
let noMoving=false; /* prevent double-fire on mobile */

const noTexts=[
  'No üòú',
  'Are you sure? ü•∫',
  'Really?! üò¢',
  'Think again! üíî',
  'Pretty please? üôè',
  'I\'ll be sad üò≠',
  'Don\'t do this! üíï',
  'One more chance? ü•π',
  'PLEASE üò©',
  'You\'re breaking my heart üíî',
  'I won\'t give up! üí™',
  '...just say Yes already ‚ù§Ô∏è',
  'Okay I\'ll just wait here ü•∫',
  'Still no?! üò±',
  'You\'re so stubborn üòú',
  'But I love you! üíñ',
  'No is not an option! üö´',
  'Try again üòè',
  'Nope, not accepting that! üíï',
  'The answer is Yes üòç',
];

const pleadMessages=[
  {emoji:'ü•∫', text:'But I made this whole website for you...'},
  {emoji:'üò¢', text:'My heart just cracked a little...'},
  {emoji:'üíî', text:'Are you really going to break my heart?'},
  {emoji:'üôè', text:'I promise to love you forever!'},
  {emoji:'üò≠', text:'The roses are crying right now...'},
  {emoji:'ü•π', text:'Even the stars are asking you to say yes...'},
  {emoji:'üíï', text:'Come on, you know you want to say yes!'},
  {emoji:'üò©', text:'I\'ll keep asking until you say yes!'},
  {emoji:'‚ú®', text:'The universe wants us together!'},
  {emoji:'üíñ', text:'Your smile already said yes...'},
  {emoji:'üëë', text:'Every queen deserves her king!'},
  {emoji:'üåπ', text:'This rose won\'t stop until you say yes!'},
  {emoji:'üòç', text:'Just look at those photos and say yes!'},
  {emoji:'üíó', text:'My love for you is bigger than this button!'},
  {emoji:'ü´∂', text:'You + Me = Forever. It\'s simple math!'},
  {emoji:'ü•∞', text:'You know resistance is futile, right?'},
  {emoji:'üíò', text:'Cupid is on my side!'},
  {emoji:'üò§', text:'I can do this all day!'},
  {emoji:'ü¶ã', text:'You give me butterflies every single day...'},
  {emoji:'üíù', text:'Okay fine, I\'ll just love you anyway!'},
];

function moveNo(e){
  if(e){e.preventDefault();e.stopPropagation();}

  /* Prevent double-fire (touchstart + mouseover on mobile) */
  if(noMoving) return;
  noMoving=true;
  setTimeout(()=>noMoving=false, 300);

  const btn=document.getElementById('no');
  const yesBtn=document.getElementById('yes');

  /* First touch: escape from flow to fixed position */
  if(!noEscaped){
    noEscaped=true;
    btn.classList.add('escaped');
  }

  /* Cycle through No button texts */
  noCount++;
  const idx=noCount % noTexts.length;
  btn.innerText=noTexts[idx];

  /* Grow Yes button gradually (caps at 1.4x) */
  const grow=Math.min(1.4, 1 + Math.min(noCount,8)*0.05);
  yesBtn.style.transform=`scale(${grow})`;
  yesBtn.style.boxShadow=`0 ${8+Math.min(noCount,10)*2}px ${32+Math.min(noCount,10)*4}px rgba(232,67,106,${Math.min(.75,.45+Math.min(noCount,10)*.03)})`;

  /* Move No button to random safe position (always on screen) */
  const btnW=Math.max(btn.offsetWidth, 120);
  const btnH=Math.max(btn.offsetHeight, 50);
  const pad=30;
  const maxX=Math.max(pad, innerWidth - btnW - pad);
  const maxY=Math.max(pad, innerHeight - btnH - pad);
  const newX=pad + Math.random()*(maxX - pad);
  const newY=pad + Math.random()*(maxY - pad);
  btn.style.left=newX+'px';
  btn.style.top=newY+'px';

  /* Keep button fully visible ‚Äî NO shrinking, NO fading */
  btn.style.opacity='1';
  btn.style.transform='scale(1)';

  /* Show pleading speech bubble */
  showPleadBubble(btn, newX, newY);

  /* Gentle page shake */
  document.body.style.animation='none';
  requestAnimationFrame(()=>{
    document.body.style.animation='pageShake .3s ease';
  });
}

function showPleadBubble(nearBtn, btnX, btnY){
  if(currentBubble){
    currentBubble.remove();
    currentBubble=null;
  }

  const msgIdx=(noCount-1) % pleadMessages.length;
  const msg=pleadMessages[msgIdx];
  const bubble=document.createElement('div');
  bubble.className='plead-bubble';
  bubble.innerHTML=`<span class="plead-emoji">${msg.emoji}</span><span class="plead-text">${msg.text}</span>`;

  /* Position above or below the No button depending on screen space */
  const bubbleWidth=260;
  let bx=Math.min(innerWidth-bubbleWidth-10, Math.max(10, (btnX||0) - 60));
  let by=(btnY||0) - 85;
  if(by<10) by=(btnY||0) + (nearBtn.offsetHeight||50) + 15;

  bubble.style.left=bx+'px';
  bubble.style.top=by+'px';

  document.body.appendChild(bubble);
  currentBubble=bubble;

  setTimeout(()=>{
    if(bubble===currentBubble){
      bubble.style.animation='bubbleOut .3s ease-in forwards';
      setTimeout(()=>{bubble.remove();if(currentBubble===bubble)currentBubble=null},300);
    }
  },2200);
}

/* ========== CREATIVE COUNTER ========== */
const meetDate=new Date('2025-09-28T10:00:00');

const prevVals={};
function animateNum(id,val){
  if(prevVals[id]===val)return;
  prevVals[id]=val;
  const el=document.getElementById(id);
  el.innerText=String(val).padStart(2,'0');
  el.style.transform='scale(1.12)';
  requestAnimationFrame(()=>{
    el.style.transition='transform .3s ease';
    requestAnimationFrame(()=>el.style.transform='scale(1)');
  });
}

function updateCounter(){
  const diff=Date.now()-meetDate.getTime();
  if(diff<0)return;
  const totalSec=Math.floor(diff/1000);
  animateNum('c-days',Math.floor(totalSec/86400));
  animateNum('c-hours',Math.floor((totalSec%86400)/3600));
  animateNum('c-mins',Math.floor((totalSec%3600)/60));
  animateNum('c-secs',totalSec%60);

  // ~72 bpm √ó 2 people = ~144 combined heartbeats per minute
  const hb=Math.floor(totalSec*2.4);
  document.getElementById('hb-count').innerText=hb.toLocaleString();
}
setInterval(updateCounter,1000);
updateCounter();

/* ========== MILESTONE TOAST ========== */
function showMilestoneToast(){
  const days=Math.floor((Date.now()-meetDate.getTime())/864e5);
  let msg;
  if(days>=365) msg=`üéâ Over ${Math.floor(days/365)} year${Math.floor(days/365)>1?'s':''} of loving you!`;
  else if(days>=180) msg='üí´ Half a year of magic together!';
  else if(days>=100) msg=`‚ú® ${days} days & counting!`;
  else msg=`üíï ${days} beautiful days together`;

  const t=document.createElement('div');
  t.className='milestone-toast';
  t.innerHTML=`<span class="mt-emoji">üåπ</span><span class="mt-text">${msg}</span>`;
  document.body.appendChild(t);
  setTimeout(()=>t.style.animation='toastOut .5s ease-in forwards',4000);
  setTimeout(()=>t.remove(),4600);
}

/* ========== EFFECTS ========== */
function burstHearts(n){
  const emojis=['üíñ','üíï','üíò','üíù','‚ù§Ô∏è','üåπ'];
  for(let i=0;i<n;i++){
    setTimeout(()=>{
      const el=document.createElement('div');
      el.className='burst-heart';
      el.innerText=emojis[Math.floor(Math.random()*emojis.length)];
      el.style.left=Math.random()*innerWidth+'px';
      el.style.top=innerHeight*.3+Math.random()*innerHeight*.5+'px';
      el.style.animationDuration=(1.5+Math.random())+'s';
      document.body.appendChild(el);
      setTimeout(()=>el.remove(),2500);
    },i*80);
  }
}

function startPetals(){
  setInterval(()=>{
    const p=document.createElement('div');
    p.className='petal';
    p.style.left=Math.random()*innerWidth+'px';
    const sz=(8+Math.random()*10)+'px';
    p.style.width=sz;p.style.height=sz;
    p.style.animationDuration=(4+Math.random()*5)+'s';
    p.style.opacity=(.2+Math.random()*.4);
    p.style.background=`hsl(${340+Math.random()*30},70%,${70+Math.random()*15}%)`;
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),9000);
  },300);
}

document.addEventListener('click',e=>{
  if(document.getElementById('second-page').style.display==='block'){
    for(let i=0;i<3;i++){
      const s=document.createElement('div');
      s.className='sparkle';
      s.innerText=['‚ú®','üí´','‚≠ê'][i];
      s.style.left=(e.clientX+Math.random()*30-15)+'px';
      s.style.top=(e.clientY+Math.random()*30-15)+'px';
      document.body.appendChild(s);
      setTimeout(()=>s.remove(),900);
    }
  }
});

/* ========== ROTATING REASONS ========== */
const reasons=[
  'Your smile that lights up my world ‚ú®',
  'The way you laugh at my silly jokes üòÑ',
  'Your adorable angry face ü•∫',
  'How safe I feel with you ü§ó',
  'Your kindness that inspires me üå∏',
  'Everything you are, everything we are ‚ù§Ô∏è'
];
let ri=0;
const reasonEl=document.getElementById('reasons');
function cycleReason(){
  reasonEl.style.opacity=0;
  setTimeout(()=>{
    reasonEl.innerText=reasons[ri];
    reasonEl.style.opacity=1;
    ri=(ri+1)%reasons.length;
  },400);
}
cycleReason();
setInterval(cycleReason,3000);

/* ========== FLOATING WHISPERS ========== */
const whispers=['I miss you üíï','Forever yours ‚ù§Ô∏è','My queen üëë','You & me, always ‚ú®','Mon amour üåπ','My everything üíñ'];
setInterval(()=>{
  if(document.getElementById('second-page').style.display!=='block')return;
  const w=document.createElement('div');
  w.className='whisper';
  w.innerText=whispers[Math.floor(Math.random()*whispers.length)];
  w.style.left=Math.random()*innerWidth+'px';
  w.style.top=innerHeight+'px';
  document.body.appendChild(w);
  setTimeout(()=>w.remove(),7500);
},2500);

/* ========== LETTER ========== */
function showLetter(){document.getElementById('letter-modal').style.display='flex'}
function hideLetter(){document.getElementById('letter-modal').style.display='none'}
</script>

</body>
</html>
